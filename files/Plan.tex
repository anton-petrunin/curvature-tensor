\section{Regular points}\label{sec:ref}

\subsection{Common chart and delta-convergence}\label{subsec:chart+delta}

Choose a smoothing $M_n\smooths{} A$ of an $m$-dimensional Alexandrov space $A$.
Let $p\in A$ be a point of rank $m$; that is, there are $m+1$ points $a_0,\dots, a_m\in A$ such that 
$\angk p{a_i}{a_j}>\tfrac\pi2$ for all $i\ne j$.

Recall \cite[Sec. 7]{petrunin-conc} that we can choose small $r>0$,
finite set of points $\bm{a}_i$ near $a_i$,
and a smooth concave increasing real-to-real function $\phi$ defined on an open interval such that 
\[f_i=\sum_{x\in \bm{a}_i}\phi\circ\widetilde{\dist}_{x,r}\]
is strongly a concave function that is defined in a neighborhood $U\ni p$;
it will be called \emph{smoothed distance chart}.

Since $r$ is small, and all points in $\bm{a}_i$ are near $a_i$ we get that the functions $f_0, \dots, f_m$ are tight in $U$; see the definition in \cite{petrunin-conc}.
In particular, the map $U\to\RR^m$ defined by $x\mapsto (f_1(x),\dots,f_m(x))$ is a coordinate system in $U$.

The presented construction can be lifted to $M_n$.
As a result, we obtain a chart of an open set $U_n\subset M_n$.
Passing to smaller sets we may assume that $U$ and each $U_n$ is mapped to a fixed open set $\Omega\subset\RR^m$ for all large $n$.
Further, we assume that it holds for all $n$; it could be achieved by cutting off the beginning of the sequence $M_n$.

The obtained collection of charts $\bm{x}_n\:U_n\zz\to \Omega$ and $\bm{x}\:U\zz\to \Omega$ will be called a \emph{common chart} at $p$.
It will be used to identify points of $\Omega$, $M_n$, and $A$; 
in addition, we will use it to identify the tangent spaces $\T M_n$ and $\T A$ with $\RR^m$.
For example, we will use the same notation for function $M_n\to \RR$ and its composition $\Omega\to \RR$ with the inverse of the chart $U_n\to \Omega$.
We will use index $n$ or skip it to indicate that the calculations are performed in $M_n$ or $A$ respectively.
For example, given a function $f\:\Omega\to \RR$, we denote by $\nabla_nf$ and $\nabla f$ the gradients of $f\circ \bm{x}_n$ in $M_n$ and $f\circ \bm{x}$ in $A$ respectively.

Recall that $A^\delta$ denotes the set of $\delta$-strained points in $A$.
For a fixed common chart $\bm{x}$ we will use notation $A^\delta_\Omega$ for the image $\bm{x}(A^\delta)\subset \Omega$.

Part \ref{prop:3parts}\textit{(\ref{prop:3parts:reg})} will follow from certain estimates in one common chart.

\begin{thm}{Definitions}\label{def:delta-converge}
Let $M_n\smooths{} A$, $\dim A=m$;
choose a common chart with range $\Omega\subset \RR^m$.

A sequence of measures $\mathfrak n_n$ defined on $\Omega$ is called \emph{weakly delta-converging}
if the following conditions hold:
\begin{itemize}
 \item Every subsequence of $\mathfrak n_n$ has a weak partial limit.
 \item For any $\eps>0$ there is $\delta>0$ such that for any two weak partial limits $\mathfrak m_1$ and $\mathfrak m_2$ of $(\mathfrak n_n)$ we have  
\[|(\mathfrak m_1-\mathfrak m_2)(S)|<\eps\]
for any Borel set $S\subset A^\delta_\Omega$.
\end{itemize}
A sequence of bounded functions $f_n$ on $\Omega$ is called \emph{weakly delta-converging} if the measures $f_n\cdot \vol_n$ are weakly delta-converging.

A sequence of functions $f_n$ defined on $\Omega$ is called \emph{uniformly delta-converging}
if the following conditions hold:
\begin{itemize}
 \item For any $\eps>0$ there is $\delta>0$ such that such that 
\[\limsup_{n\to\infty} \{f_n(x)\}-\liminf_{n\to\infty}\{f_n(x)\}<  \eps\]
for any $x\in A^\delta_\Omega$.
\end{itemize}

\end{thm}

\begin{thm}{Observation}\label{obs:delta-weak-uniform}
If $f_n$ is uniformly delta-converging and $\mathfrak n_n$ is weakly delta-converging,
then $f_n\cdot \mathfrak n_n$ is weakly delta-converging.
\end{thm}

\subsection{Convergences}\label{sec:test-convergence}

\begin{thm}{Lemma}\label{lem:test-delta}
Let $M_n\smooths{} A$, $\dim A=m$;
choose a common chart with range $\Omega\subset \RR^m$.
Let $f_n\: M_n\to\RR$ be a sequence of $C^1$-functions such that $f_n\zz\smoothto f\:A\to \RR$.
Let us denote by $\partial_1,\dots,\partial_m$ the partial derivatives on $\Omega\subset \RR^m$.
Denote by $g_{ij,n}$ and $g^{ij}_n$ the components of the metric tensors on $M_n$.
Then 
\begin{enumerate}[(i)]
\item\label{lem:test-delta-f} $f_n$ uniformly converges to $f$ on $\Omega$;
\item\label{lem:test-delta-partial} $\partial_if_n$ are uniformly delta-converging;
\item\label{lem:test-delta-g}  $g_{ij,n}$ and $g^{ij}_n$ are uniformly delta-converging for all $i,j$;
moreover, $\det g_{ij,n}$ is bounded away from zero;
\item\label{lem:test-delta|nabla|} $|\nabla_n f_n|$ uniformly delta-converges on $\Omega$; %???do we need it???
\end{enumerate}

\end{thm}

\parit{Proof.}
Part \textit{(\ref{lem:test-delta-f})} is trivial.

\parit{(\ref{lem:test-delta-partial}).}
Suppose $a_0, a_1,\dots,a_m$ struts $p$ (see the definition in \cite{AKP}), and the geodesics $[pa_i]$ are uniquely defined.
In this case, for any sequence of points $a_{i,n}, p_n\in M_n$ such that $a_{i,n}\to a_i$, and $p_n\to p$ as $n\to\infty$, we have
\[\lim_{n\to\infty}\measuredangle \hinge{p_n}{a_{i,n}}{a_{j,n}}\ge \measuredangle \hinge{p}{a_i}{a_j}.\]

If $\T_p$ is Euclidean, then ($n$+1)-point comparison implies that equality holds in the last inequality.

Note that the angles $\measuredangle \hinge{p_n}{a_{i,n}}{a_{j,n}}$ for all $i,j>0$ completely desicribe the metric tensor at $p_n$ in the basis $V_{1,n},\dots,V_{m,n}$, where $V_{i,n}$ is the unit vector in the direction of $[p_n,a_{i,n}]$.

If $f_n\zz\smoothto f$, then $V_{i,n}f_n$ completely describes $\nabla_{p_n}f_n$ in the basis $V_{1,n},\zz\dots,V_{m,n}$.
From above, we can express $|\nabla_{p_n}f_n|$ in terms of $V_{i,n}f_n$ and the angles $\measuredangle \hinge{p_n}{a_{i,n}}{a_{j,n}}$.
Whence we get convergence $|\nabla_{p_n} f_n|\zz\to |\nabla_{p} f|$ and therefore 
\[\langle \nabla_{p_n} f_n,\nabla_{p_n} h_n\rangle\zz\to \langle \nabla_p f,\nabla_p h\rangle\] if $h_n\smoothto h$; the latter follows by identity $4\cdot B(x,y)\zz=B(x\zz+y,x\zz+y)\zz-B(x\zz-y,x\zz-y)$ for any bilinear form $B$.

Note that the partial derivatives $\partial_if_n$ at a regular point $p$ can be expressed in terms of $\langle d_pf_n,d_px_j\rangle_n$ and $\langle d_px_j,d_px_k\rangle_n$, where $x_1,\dots,x_m$ are the coordinate functions of the chart.
Therefore, we get that all $\partial_if_n$ converge at any regular point.

Finally, observe that if $p$ is a $\delta$-strained point for sufficiently small $\delta>0$,
then the calculations above go thru with a small error.
Whence the statement follows.

\parit{(\ref{lem:test-delta-g}).}
This part follows from the proof of \textit{(\ref{lem:test-delta-partial})} since $g^{ij}_n\zz=\langle d_px_i,d_px_j\rangle_n$ and $g_{ij,n}$ can be expressed thru~$g^{ij}_n$.

\parit{(\ref{lem:test-delta|nabla|}).}
Note that $|\nabla_n f_n|$ can be expressed from $g^{ij}_n$ and $\partial_if_n$.
Since these quantities are delta-converging, so is $|\nabla_n f_n|$.
\qeds

The following lemma relies on the DC-calculus which is discussed in Section~\ref{sec:DC};
this section includes the definition of DC and DC$_0$ functions, as well as DC convergence.
Since \textit{test convergence implies DC convergence} (see \ref{obs:test-DC}),
the lemma also holds for test-converging sequences of functions.


\begin{thm}{Lemma}\label{lem:test-delta-partial-g}
Let $M_n\smooths{} A$.
Choose a common chart $\bm{x}_n\:U_n\subset M_n\zz\to \Omega$ and $\bm{x}\:U\subset A\zz\to \Omega$ with range $\Omega\subset \RR^m$.
Let $f_n\: M_n\to\RR$ be a sequence of smooth functions that DC connverges to a DC$_0$ function $f\:A\to \RR$.
%Let $f_n\: M_n\to\RR$ be a sequence of test functions such that $f_n\zz\testto f\:A\to \RR$.
Let us denote by $\partial_1,\dots,\partial_m$ the partial derivatives on $\Omega\subset \RR^m$.
Denote by $g_{ij,n}$ and $g^{ij}_n$ the components of the metric tensors on $M_n$.
Then  the partial derivatives $\partial_kg_{ij,n}$, $\partial_k g^{ij}_n$,  $\partial_j\partial_if_n$, as well as their products to uniformly delta-converging functions,  are weakly converging.

\end{thm}

\parit{Proof.} 
The weak convergence of $\partial_kg_{ij,n}$, $\partial_k g^{ij}_n$, and $\partial_j\partial_if_n$
follows from \ref{metricBV}.
By Observation~\ref{obs:delta-weak-uniform}, products of these partial derivatives to uniformly delta-converging sequences of functions is weakly delta-converging.

Let $h_n\:M_n\to\RR$ be a uniformly delta-converging sequence.
Note that its limit is well defined in $A^\circ$; denote it by $h$;
let us extend it by $0$ to the whole $A$.

Denote by $\mathfrak m_n$ one of the measures on $\Omega$ with the density $\partial_kg_{ij,n}$, $\partial_k g^{ij}_n$, or $\partial_j\partial_if_n$.
Let $\mathfrak m$ be the corresponding limit measure $\partial_kg_{ij}$, $\partial_k g^{ij}$, or $\partial_j\partial_if$.
We need to show that 
\[\int_{\Omega} (h_n\circ\bm{x}_n^{-1}) \cdot \phi\cdot \mathfrak m_n
\to
\int_{\Omega} (h\circ\bm{x}^{-1}) \cdot \phi\cdot \mathfrak m\quad\text{as}\quad n\to\infty
\eqlbl{eq:convegence}\]
for any continuous function $\phi\:\Omega\to\RR$ with compact support.

Choose $\eps>0$; let $\delta>0$ be as in \ref{def:delta-converge} (for $h_n$).
The set $S^\delta_\Omega=\Omega\setminus A^\delta_\Omega$ is a closed subset of $\Omega$.
By~\ref{metricBV+}, $|\mathfrak m|(S^\delta_\Omega)=0$.
Therefore we can choose an open neighborhood $N\subset \Omega$ of $S^\delta_\Omega$ such that $|\mathfrak m|(N)<\eps$.
Choose two nonnegative continuous functions $\phi_0$ and $\phi_1$ such that 
\[\phi=\phi_0+\phi_1,
\qquad
\supp \phi_0\subset N,
\qquad
\supp \phi_1\subset A^\delta_\Omega=\Omega\setminus S^\delta_\Omega.\]

Note that the sequence $a_n=\int_{\Omega} (h_n\circ\bm{x}_n^{-1}) \cdot \phi_0\cdot \mathfrak m_n$ \textit{converges with error} 
$\eps_0=\eps\cdot c \cdot\max\{\,|\phi|\,\}$, where $c$ is a bound on $|h_n|$. 
In other words, the upper and lower limits of $a_n$ differ by at most~$\eps_0$.
Similarly, $b_n=\int_{\Omega} (h_n\circ\bm{x}_n^{-1}) \cdot \phi_1\cdot \mathfrak m_n$ converges with error $\eps_1=\eps\cdot |\mathfrak m|\cdot c \cdot\max\{\,|\phi|\,\}\,\}$.
Since $\eps>0$ is arbitrary, we get \ref{eq:convegence}.
\qeds

\subsection{Proof modulo key lemma}\label{subsec:modulo-key}

\begin{thm}{Key lemma}\label{A^0}
Choose a common chart with range $\Omega\subset \RR^m$ for a smoothing $M_n\smooths{} A$.
Choose a component $\Rm_{ijsr,n}$ of the curvature tensor of $M_n$ in $\Omega$.
Then $\Rm_{ijsr,n}\cdot \vol^m_n$ is a weakly delta-converging sequence of measures.
\end{thm}

The proof of the key lemma will take the remaining part of this section;
in the current subsection, we show that it implies \ref{prop:3parts}\textit{(\ref{prop:3parts:reg})}.

\parit{Proof of \ref{prop:3parts}(\ref{prop:3parts:reg}) modulo \ref{A^0}.}
Recall that components of $\qm_n$ can be expressed from the components of $\Rm_n$.
Therefore, the key lemma implies delta-convergence of components of $\qm_n$.

Choose sequences of test functions $f_{1,n},\zz\dots,f_{m-2,n},h_{1,n},\zz\dots,h_{m-2,n}$ on $M_n$ that test-converge to $f_{1},\zz\dots,f_{m-2},h_{1},\zz\dots,h_{m-2}\:A\to \RR$.
By \ref{lem:test-delta}, we have delta-convergence of the partial derivatives $\partial_if_{j,n}$ and 
$\partial_ih_{j,n}$ to $\partial_if_{j}$ and 
$\partial_ih_{j}$ respectively.
The measures $\qm_n(f_{1,n},\zz\dots,f_{m-2,n},\zz{}h_{1,n},\zz\dots,h_{m-2,n})$ 
can be expressed as a linear combination of the components of $\qm_n$ with coefficients expressed in terms of $\partial_if_{j,n}$.
By \ref{obs:delta-weak-uniform}, it follows that the sequence of measures 
\[\mathfrak m_n=\qm_n(f_{1,n},\dots,f_{m-2,n},h_{1,n},\zz\dots,h_{m-2,n})\]
is delta-converging.

Finally, recall that 
\[A^\circ=\bigcap_{\delta>0}A^\delta.\]
Therefore delta-convergence of $\qm_n(f_{1,n},\dots,f_{m-2,n},h_{1,n},\zz\dots,h_{m-2,n})$ implies \ref{prop:3parts}\textit{(\ref{prop:3parts:reg})}.
\qeds

\subsection{Bochner formula}\label{sec:bochner}

Let $M$ be Riemannian $m$-manifold and $f\:M\to\R$ be a smooth function without critical points on an open domain $\Omega\i M$.
Set $u=\nabla f/|\nabla f|$.
Let us define $\Int_f(x)$ (or just $\Int$) to be scalar curvature of the level set $L_x=f^{-1}(f(x))$ at $x\in L_x\i M$.
Set
\begin{enumerate}
 \item $\kappa_1(x)\le\kappa_2(x)\le\dots\le\kappa_{m-1}(x)$ the principal curvatures of $L_x$ at $x$;
 \item $H=H_f(x)=\kappa_1+\kappa_2+\dots+\kappa_{m-1}$ is mean curvature of $L_x$ at $x$
\item $G=G_f(x)=2\sum_{i<j}\kappa_i\cdot\kappa_j$ is the extrinsic term
 in the Gauss formula for $\Int_f(x)$. 
\end{enumerate}

Let us define the strange curvature as
\[\Str(u)=\Sc-\<\Ric(u),u\>,\]
where $\Sc$ and $\Ric$ denote scalar and Ricci curvature correspondingly.

\begin{thm}{Bochner's formula}\label{thm:bochner-formula}
Let $M$ be an $m$-dimensional Riemannian manifold,
 $f\:M\to\R$ be a smooth function without critical points on an open domain $\Omega\subset M$ and $u=\nabla f/|\nabla f|$.
Assume $\phi\:\Omega\to\R$ is a smooth function with compact support.
Then 
\[\int\limits_\Omega \phi\cdot \langle \Ric u,u\rangle =
\int\limits_\Omega [\phi \cdot G+H\cdot\<u,\nabla\phi\>-\<\nabla\phi,\nabla_{u} {u}\>]
\eqlbl{eq:Bochner(-1)}
\]
and
\[\int\limits_\Omega \phi\cdot \Str(u)
=
\int\limits_\Omega \l[H\cdot\<u,\nabla\phi\>- \<\nabla\phi,\nabla_u u\> \r]+
\int\limits_\Omega \phi\cdot \Int_f.
\eqlbl{eq:Bochner0}\]
\end{thm}

The following calculations are based on \cite[Chapter II]{lawson-michelsohn}.
The Dirac operator will be denoted by $D$.
We use the Riemannian metric to identify differential forms and multivector fields on $M$.
Therefore the statement about differential forms can be also formulated in terms of multivector fields and the other way around.

\parit{Proof.}
Assume $b_1,\dots, b_m$ is an orthonormal frame such that $b_m=u$, 
then 
\[\Sc-2\cdot \<\Ric(u),u\>=2\cdot \sum_{i<j<m} \sec(b_i\wedge b_j).\] 
Therefore the Gauss formula can be written as
\[
\begin{aligned}
\Int&=G+\Sc-2\cdot \<\Ric(u),u\>=
\\
&=G+\Str(u)+ \<\Ric(u),u\>.
\end{aligned}
\eqlbl{eq:gauss}
\]

We can assume that $b_i(x)$ point in the principal directions of $L_x$ for $i<m$.
Note that $\<\nabla_u u,u\>=0$, therefore
\begin{align*}
Du&=\sum_{i} b_i\bullet  \nabla_{b_i}u=
\\
&=\sum_{i<m}\kappa_i\cdot  b_i\bullet  b_i+u\bullet  \nabla_{u}u=
\\
&=
\sum_{i=1}^{m}\kappa_i+u\wedge\nabla_{u}u=H+u\wedge\nabla_{u}u,
\end{align*}
here ``$\,\bullet \,$'' denotes the Clifford multiplication.
Applying again that $\<\nabla_u u,u\>=0$, we get that
$$ \langle Du,Du \rangle=
\l(\sum_{i<m}\kappa_i\r)^2+|\nabla_{u}u|^2=H^2+|\nabla_{u}u|^2.$$
On the other hand
$$\nabla u=\sum_{i<m}\kappa_i\cdot b_i\otimes b_i+\nabla_u u\otimes u,$$
hence
$$\langle\nabla u,\nabla u\rangle =
\sum_{i<m}\kappa_i^2+|\nabla_{u}u|^2.$$

Therefore
$$\langle D u,D u\rangle-\langle \nabla u,\nabla u \rangle =2\cdot\sum_{i<j}\kappa_i\cdot\kappa_j=G.$$

Further,
\begin{align*}
\int\limits_\Omega\phi\cdot\l[\<D u,D u\>-\<D^2 u, u\>\r]
&=
\int\limits_\Omega\<\nabla\phi\bullet u,D u\>
=
\\
&=
-\int\limits_\Omega\l[H\cdot\<\nabla\phi,u\>- \<\nabla\phi,\nabla_u u\> \r].
\end{align*}

Since $|u|\equiv 1$, we have $\<\nabla_{\nabla\phi}  u, u\>=0$.
Therefore
$$\int\limits_\Omega\phi\cdot\l[\<\nabla u,\nabla u\>-\<\nabla^*\nabla u, u\>\r]
=
\int\limits_\Omega\<\nabla_{\nabla\phi}  u, u\>=0.$$

By Bochner formula \cite[8.3]{lawson-michelsohn},
$$D^2u-\nabla^*\nabla u=\Ric(u);$$
in particular, 
$$\phi\cdot \<D^2u,u\>-\phi\cdot \<\nabla^*\nabla u,u\>=\phi\cdot \<\Ric(u),u\>.\eqlbl{eq:prebochner}$$
Integrating \ref{eq:prebochner} and applying the derived formulas we get
\begin{align*}
\int\limits_\Omega \phi \cdot G
&=\int\limits_\Omega\phi\cdot\left[\<D u,D u\>-\<\nabla u,\nabla u\>\right]
=
\\
&=\int\limits_\Omega \phi\cdot \Ric(u,u) 
-
\int\limits_\Omega\left[ H\cdot\<u,\nabla\phi\>- \<\nabla\phi,\nabla_u u\>\right].
\end{align*}

It remains to apply the Gauss formula \ref{eq:gauss}.
\qeds




 
 
 
 

  
 
\subsection{DC-calculus}\label{sec:DC}

Let $f$ be a continuous function defined on an open domain of a finite-dimensional Alexandrov space $A$.
Recall that a function $f$ is called \emph{DC} if it can be presented locally as a difference between two concave functions.
Recall that for any point $p\zz\in A$ there is a $(-1)$-concave function defined in a  neighborhood  of $p$ \cite[3.6]{PerMorse}.
Therefore we can say that $f$ is DC if and only if it can be presented locally as a difference between two semiconcave functions. 

Suppose that a sequence of Alexandrov spaces $A_n$ converges to an Alexandrov space $A$ without collapse.
Let $f_n$ and $f$ be DC functions defined on open domains $\Dom f_n\subset A_n$ and $\Dom f \subset A$.
Suppose that for any $p\in \Dom f$ there is a sequence $p_n\in \Dom f_n$ and $R>0$ such that $p_n\to p$ and $B(p_n,R)_{A_n}\subset \Dom f_n$, $B(p,R)_{A}\subset\Dom f$
and for some fixed $\lambda\in\RR$, and each large $n$ we have $\lambda$-concave functions $a_n$ and $b_n$ defined in $B(p_n,R)_{A_n}$ and $\lambda$-concave functions $a$ and $b$ defined in $B(p,R)_{A}$
such that $f_n=a_n-b_n$ and $f=a-b$ and the sequences
$a_n$ and $b_n$ converge to functions $a$ and $b$ respectively.
In this case, we say that $f_n$ is \emph{DC-converging} to $f=a-b\:A\to \RR$ as $n\to\infty$; briefly $f_n\DCto f$.

\begin{thm}{Observation}\label{obs:test-DC}
Any test function is DC. Moreover, test-convergence implies DC-convergence. 
\end{thm}

\parit{Proof.}
Choose a test-function $f=\phi(\widetilde\dist_{p_1,r},\dots,\widetilde\dist_{p_n,r})$.
Note that the function $\phi$ can be presented locally as a difference between $C^2$-smooth concave functions increasing in each argument; say $\phi=\psi-\chi$.

For the first part of the observation, it remains to observe that the functions $a=\psi(\widetilde\dist_{p_1,r},\dots,\widetilde\dist_{p_n,r})$ and $b=\chi(\widetilde\dist_{p_1,r},\dots,\widetilde\dist_{p_n,r})$ are semiconcave.

Suppose that a sequence of functions $\phi_i$ is $C^2$-converging to $\phi$.
Choose $x=(x_1,\dots,x_n)$ in the domain of definition of $\phi$.
Note that $\phi_n$ and its partial derivatives up to order 2 are bounded;
fix a bound $C$.
Then in a neighborhood of $(x_1,\dots,x_n)$ we may choose $\psi_n$ that is uniquely defined by $\psi_n(x)=0$, $\partial_i\psi_n(x)=2\cdot C$ and $\partial_i^2\psi_n\equiv -C$; in this case, $\chi_n=\psi_n-\phi_n$ is concave.
Moreover, $C^2$-convergence of $\phi_n$ implies convergence of $\psi_n$ and $\chi_n$.
Hence, the second statement follows.
\qeds

The definition of DC-convergence extends naturally to sequences of functions defined on a fixed domain $\Omega\subset \RR^m$.
The proof of the following statement is a straightforward modification of \cite[Section 3]{PerDC}:

\begin{thm}{Proposition}\label{prop:DC-conv}
Let $M_n\smooths{} A$;
choose a common chart $\bm{x}_n\:U_n\subset M_n\to \Omega$, $\bm{x}\:U\subset A\to \Omega\subset \RR^m$.

Consider functions $f_n$ and $f$ defined on $U_n$ and $U$ respectively.
Then $f_n\DCto f$ if and only if $f_n\circ \bm{x}_n^{-1}\DCto f\circ \bm{x}^{-1}$
\end{thm}

Further, straightforward modifications of \cite[Section 4]{PerDC} produce the following statement.

\begin{thm}{Theorem}\label{metricBV}
Let $M_n\smooths{} A$, $\dim A=m$; choose a common chart $\bm{x}_n$ defined on $U_n\subset M_n$, $\bm{x}$ defined on $U\subset A$ with common range $\Omega\subset \RR^m$.
Denote by $g_{ij,n}$ components of metric tensors in this chart
and by $g^{ij}_n$ coordinates of the inverse matrix. 
Let $f_n\:U_n\to \RR$ be a test-converging sequence of functions.
Then partial derivatives $\partial_k g_{ij,n}$, $\partial_k g^{ij}_n$, $\partial_i\partial_jf_n$ weakly converge to measures on $A$ that has a vanishing $(m-1)$-density;
that is, if $\mathfrak{m}$ is a limit measure, then $\frac{\mathfrak{m}(B(p,r))}{r^{m-1}}\to 0$ as $r\to 0$.
\end{thm}


{\it Proof of the Theorem~\ref{metricBV}.}
Let's start with the partial derivatives of metric tenors.
In \cite[Section 4.2]{PerDC}, it was shown that components of metric tensors can be expressed as a rational function from partial derivatives of distance functions to a finite collection of distance functions.
The distance functions are semiconcave, in particular DC.

The base points $p_{i,n}\in M_n$ of these distance functions can be chosen so that they converge to some point $p_i\in A$.
In this case, the distance functions are DC-converging.
Now, applying \ref{prop:DC-conv} and repeating the argument in \cite[Section 4.3]{PerDC} we get the statement.

The case of $\partial_i\partial_jf_n$ is done by similar modifications of \cite[Section 4.4]{PerDC}.
\qeds






